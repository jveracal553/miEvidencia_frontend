{"ast":null,"code":"'use strict';\n\nvar objectAssign = require('object-assign');\n\nvar urlParse = require('url-parse');\n\nvar isReactNative = typeof navigator === 'undefined' ? false : navigator.product === 'ReactNative';\nvar has = Object.prototype.hasOwnProperty;\nvar defaultOptions = {\n  timeout: isReactNative ? 60000 : 120000\n};\n\nmodule.exports = function (opts) {\n  var options = typeof opts === 'string' ? objectAssign({\n    url: opts\n  }, defaultOptions) : objectAssign({}, defaultOptions, opts); // Parse URL into parts\n\n  var url = urlParse(options.url, {}, // Don't use current browser location\n  true // Parse query strings\n  ); // Normalize timeouts\n\n  options.timeout = normalizeTimeout(options.timeout); // Shallow-merge (override) existing query params\n\n  if (options.query) {\n    url.query = objectAssign({}, url.query, removeUndefined(options.query));\n  } // Implicit POST if we have not specified a method but have a body\n\n\n  options.method = options.body && !options.method ? 'POST' : (options.method || 'GET').toUpperCase(); // Stringify URL\n\n  options.url = url.toString(stringifyQueryString);\n  return options;\n};\n\nfunction stringifyQueryString(obj) {\n  var pairs = [];\n\n  for (var key in obj) {\n    if (has.call(obj, key)) {\n      push(key, obj[key]);\n    }\n  }\n\n  return pairs.length ? pairs.join('&') : '';\n\n  function push(key, val) {\n    if (Array.isArray(val)) {\n      val.forEach(function (item) {\n        return push(key, item);\n      });\n    } else {\n      pairs.push([key, val].map(encodeURIComponent).join('='));\n    }\n  }\n}\n\nfunction normalizeTimeout(time) {\n  if (time === false || time === 0) {\n    return false;\n  }\n\n  if (time.connect || time.socket) {\n    return time;\n  }\n\n  var delay = Number(time);\n\n  if (isNaN(delay)) {\n    return normalizeTimeout(defaultOptions.timeout);\n  }\n\n  return {\n    connect: delay,\n    socket: delay\n  };\n}\n\nfunction removeUndefined(obj) {\n  var target = {};\n\n  for (var key in obj) {\n    if (obj[key] !== undefined) {\n      target[key] = obj[key];\n    }\n  }\n\n  return target;\n}","map":{"version":3,"mappings":"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","names":["objectAssign","require","urlParse","isReactNative","navigator","product","has","Object","prototype","hasOwnProperty","defaultOptions","timeout","module","exports","options","opts","url","normalizeTimeout","query","removeUndefined","method","body","toUpperCase","toString","stringifyQueryString","obj","pairs","key","call","push","length","join","val","Array","isArray","forEach","item","map","encodeURIComponent","time","connect","socket","delay","Number","isNaN","target","undefined"],"sources":["../../src/middleware/defaultOptionsProcessor.js"],"sourcesContent":["const objectAssign = require('object-assign')\nconst urlParse = require('url-parse')\n\nconst isReactNative = typeof navigator === 'undefined' ? false : navigator.product === 'ReactNative'\n\nconst has = Object.prototype.hasOwnProperty\nconst defaultOptions = {timeout: isReactNative ? 60000 : 120000}\n\nmodule.exports = opts => {\n  const options =\n    typeof opts === 'string'\n      ? objectAssign({url: opts}, defaultOptions)\n      : objectAssign({}, defaultOptions, opts)\n\n  // Parse URL into parts\n  const url = urlParse(\n    options.url,\n    {}, // Don't use current browser location\n    true // Parse query strings\n  )\n\n  // Normalize timeouts\n  options.timeout = normalizeTimeout(options.timeout)\n\n  // Shallow-merge (override) existing query params\n  if (options.query) {\n    url.query = objectAssign({}, url.query, removeUndefined(options.query))\n  }\n\n  // Implicit POST if we have not specified a method but have a body\n  options.method =\n    options.body && !options.method ? 'POST' : (options.method || 'GET').toUpperCase()\n\n  // Stringify URL\n  options.url = url.toString(stringifyQueryString)\n\n  return options\n}\n\nfunction stringifyQueryString(obj) {\n  const pairs = []\n  for (const key in obj) {\n    if (has.call(obj, key)) {\n      push(key, obj[key])\n    }\n  }\n\n  return pairs.length ? pairs.join('&') : ''\n\n  function push(key, val) {\n    if (Array.isArray(val)) {\n      val.forEach(item => push(key, item))\n    } else {\n      pairs.push([key, val].map(encodeURIComponent).join('='))\n    }\n  }\n}\n\nfunction normalizeTimeout(time) {\n  if (time === false || time === 0) {\n    return false\n  }\n\n  if (time.connect || time.socket) {\n    return time\n  }\n\n  const delay = Number(time)\n  if (isNaN(delay)) {\n    return normalizeTimeout(defaultOptions.timeout)\n  }\n\n  return {connect: delay, socket: delay}\n}\n\nfunction removeUndefined(obj) {\n  const target = {}\n  for (const key in obj) {\n    if (obj[key] !== undefined) {\n      target[key] = obj[key]\n    }\n  }\n  return target\n}\n"]},"metadata":{},"sourceType":"script"}
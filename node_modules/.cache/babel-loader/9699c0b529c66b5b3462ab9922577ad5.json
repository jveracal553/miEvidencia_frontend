{"ast":null,"code":"import _slicedToArray from\"/Users/shadowm/Documents/final_project/mi_evidencia/mievidencia_frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{AiOutlineLogout}from\"react-icons/ai\";import{useParams,useNavigate}from\"react-router-dom\";import{GoogleLogout}from\"react-google-login\";import{userCreatedPinsQuery,userQuery,userSavedPinsQuery}from\"../utils/data\";import{client}from\"../client\";import MasonryLayout from\"./MasonryLayout\";import Spinner from\"./Spinner\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var activeBtnStyles=\"bg-red-500 text-white font-bold p-2 rounded-full w-20 outline-none\";var notActiveBtnStyles=\"bg-primary mr-4 text-black font-bold p-2 rounded-full w-20 outline-none\";var UserProfile=function UserProfile(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),pins=_useState4[0],setPins=_useState4[1];var _useState5=useState(\"Created\"),_useState6=_slicedToArray(_useState5,2),text=_useState6[0],setText=_useState6[1];var _useState7=useState(\"created\"),_useState8=_slicedToArray(_useState7,2),activeBtn=_useState8[0],setActiveBtn=_useState8[1];var navigate=useNavigate();var _useParams=useParams(),userId=_useParams.userId;var User=localStorage.getItem(\"user\")!==\"undefined\"?JSON.parse(localStorage.getItem(\"user\")):localStorage.clear();useEffect(function(){var query=userQuery(userId);client.fetch(query).then(function(data){setUser(data[0]);});},[userId]);useEffect(function(){if(text===\"Created\"){var createdPinsQuery=userCreatedPinsQuery(userId);client.fetch(createdPinsQuery).then(function(data){setPins(data);});}else{var savedPinsQuery=userSavedPinsQuery(userId);client.fetch(savedPinsQuery).then(function(data){setPins(data);});}},[text,userId]);var logout=function logout(){localStorage.clear();navigate(\"/login\");};if(!user)return/*#__PURE__*/_jsx(Spinner,{message:\"Loading profile\"});return/*#__PURE__*/_jsx(\"div\",{className:\"relative pb-2 h-full justify-center items-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col pb-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative flex flex-col mb-7\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col justify-center items-center\",children:[/*#__PURE__*/_jsx(\"img\",{className:\" w-full h-370 2xl:h-510 shadow-lg object-cover\",src:\"https://source.unsplash.com/1600x900/?nature,photography,technology\",alt:\"user-pic\"}),/*#__PURE__*/_jsx(\"img\",{className:\"rounded-full w-20 h-20 -mt-10 shadow-xl object-cover\",src:user.image,alt:\"user-pic\"})]}),/*#__PURE__*/_jsx(\"h1\",{className:\"font-bold text-3xl text-center mt-3\",children:user.userName}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-0 z-1 right-0 p-2\",children:userId===User.googleId&&/*#__PURE__*/_jsx(GoogleLogout,{clientId:\"\".concat(process.env.REACT_APP_GOOGLE_API_TOKEN),render:function render(renderProps){return/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\" bg-white p-2 rounded-full cursor-pointer outline-none shadow-md\",onClick:renderProps.onClick,disabled:renderProps.disabled,children:/*#__PURE__*/_jsx(AiOutlineLogout,{color:\"red\",fontSize:21})});},onLogoutSuccess:logout,cookiePolicy:\"single_host_origin\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-7\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(e){setText(e.target.textContent);setActiveBtn(\"created\");},className:\"\".concat(activeBtn===\"created\"?activeBtnStyles:notActiveBtnStyles),children:\"Created\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(e){setText(e.target.textContent);setActiveBtn(\"saved\");},className:\"\".concat(activeBtn===\"saved\"?activeBtnStyles:notActiveBtnStyles),children:\"Saved\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"px-2\",children:/*#__PURE__*/_jsx(MasonryLayout,{pins:pins})}),(pins===null||pins===void 0?void 0:pins.length)===0&&/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center font-bold items-center w-full text-1xl mt-2\",children:\"No Pins Found!\"})]})});};export default UserProfile;","map":{"version":3,"names":["React","useEffect","useState","AiOutlineLogout","useParams","useNavigate","GoogleLogout","userCreatedPinsQuery","userQuery","userSavedPinsQuery","client","MasonryLayout","Spinner","activeBtnStyles","notActiveBtnStyles","UserProfile","user","setUser","pins","setPins","text","setText","activeBtn","setActiveBtn","navigate","userId","User","localStorage","getItem","JSON","parse","clear","query","fetch","then","data","createdPinsQuery","savedPinsQuery","logout","image","userName","googleId","process","env","REACT_APP_GOOGLE_API_TOKEN","renderProps","onClick","disabled","e","target","textContent","length"],"sources":["/Users/shadowm/Documents/final_project/mi_evidencia/mievidencia_frontend/src/components/UserProfile.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { AiOutlineLogout } from \"react-icons/ai\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { GoogleLogout } from \"react-google-login\";\n\nimport {\n  userCreatedPinsQuery,\n  userQuery,\n  userSavedPinsQuery,\n} from \"../utils/data\";\nimport { client } from \"../client\";\nimport MasonryLayout from \"./MasonryLayout\";\nimport Spinner from \"./Spinner\";\n\nconst activeBtnStyles =\n  \"bg-red-500 text-white font-bold p-2 rounded-full w-20 outline-none\";\nconst notActiveBtnStyles =\n  \"bg-primary mr-4 text-black font-bold p-2 rounded-full w-20 outline-none\";\n\nconst UserProfile = () => {\n  const [user, setUser] = useState();\n  const [pins, setPins] = useState();\n  const [text, setText] = useState(\"Created\");\n  const [activeBtn, setActiveBtn] = useState(\"created\");\n  const navigate = useNavigate();\n  const { userId } = useParams();\n\n  const User =\n    localStorage.getItem(\"user\") !== \"undefined\"\n      ? JSON.parse(localStorage.getItem(\"user\"))\n      : localStorage.clear();\n\n  useEffect(() => {\n    const query = userQuery(userId);\n    client.fetch(query).then((data) => {\n      setUser(data[0]);\n    });\n  }, [userId]);\n\n  useEffect(() => {\n    if (text === \"Created\") {\n      const createdPinsQuery = userCreatedPinsQuery(userId);\n\n      client.fetch(createdPinsQuery).then((data) => {\n        setPins(data);\n      });\n    } else {\n      const savedPinsQuery = userSavedPinsQuery(userId);\n\n      client.fetch(savedPinsQuery).then((data) => {\n        setPins(data);\n      });\n    }\n  }, [text, userId]);\n\n  const logout = () => {\n    localStorage.clear();\n\n    navigate(\"/login\");\n  };\n\n  if (!user) return <Spinner message=\"Loading profile\" />;\n\n  return (\n    <div className=\"relative pb-2 h-full justify-center items-center\">\n      <div className=\"flex flex-col pb-5\">\n        <div className=\"relative flex flex-col mb-7\">\n          <div className=\"flex flex-col justify-center items-center\">\n            <img\n              className=\" w-full h-370 2xl:h-510 shadow-lg object-cover\"\n              src=\"https://source.unsplash.com/1600x900/?nature,photography,technology\"\n              alt=\"user-pic\"\n            />\n            <img\n              className=\"rounded-full w-20 h-20 -mt-10 shadow-xl object-cover\"\n              src={user.image}\n              alt=\"user-pic\"\n            />\n          </div>\n          <h1 className=\"font-bold text-3xl text-center mt-3\">\n            {user.userName}\n          </h1>\n          <div className=\"absolute top-0 z-1 right-0 p-2\">\n            {userId === User.googleId && (\n              <GoogleLogout\n                clientId={`${process.env.REACT_APP_GOOGLE_API_TOKEN}`}\n                render={(renderProps) => (\n                  <button\n                    type=\"button\"\n                    className=\" bg-white p-2 rounded-full cursor-pointer outline-none shadow-md\"\n                    onClick={renderProps.onClick}\n                    disabled={renderProps.disabled}\n                  >\n                    <AiOutlineLogout color=\"red\" fontSize={21} />\n                  </button>\n                )}\n                onLogoutSuccess={logout}\n                cookiePolicy=\"single_host_origin\"\n              />\n            )}\n          </div>\n        </div>\n        <div className=\"text-center mb-7\">\n          <button\n            type=\"button\"\n            onClick={(e) => {\n              setText(e.target.textContent);\n              setActiveBtn(\"created\");\n            }}\n            className={`${\n              activeBtn === \"created\" ? activeBtnStyles : notActiveBtnStyles\n            }`}\n          >\n            Created\n          </button>\n          <button\n            type=\"button\"\n            onClick={(e) => {\n              setText(e.target.textContent);\n              setActiveBtn(\"saved\");\n            }}\n            className={`${\n              activeBtn === \"saved\" ? activeBtnStyles : notActiveBtnStyles\n            }`}\n          >\n            Saved\n          </button>\n        </div>\n\n        <div className=\"px-2\">\n          <MasonryLayout pins={pins} />\n        </div>\n\n        {pins?.length === 0 && (\n          <div className=\"flex justify-center font-bold items-center w-full text-1xl mt-2\">\n            No Pins Found!\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default UserProfile;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
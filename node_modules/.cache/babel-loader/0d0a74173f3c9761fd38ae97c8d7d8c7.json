{"ast":null,"code":"'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar objectAssign = require('object-assign');\n\nvar isPlainObject = require('is-plain-object');\n\nvar serializeTypes = ['boolean', 'string', 'number'];\n\nvar isBuffer = function isBuffer(obj) {\n  return !!obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj);\n};\n\nmodule.exports = function () {\n  return {\n    processOptions: function processOptions(options) {\n      var body = options.body;\n\n      if (!body) {\n        return options;\n      }\n\n      var isStream = typeof body.pipe === 'function';\n      var shouldSerialize = !isStream && !isBuffer(body) && (serializeTypes.indexOf(typeof body === 'undefined' ? 'undefined' : _typeof(body)) !== -1 || Array.isArray(body) || isPlainObject(body));\n\n      if (!shouldSerialize) {\n        return options;\n      }\n\n      return objectAssign({}, options, {\n        body: JSON.stringify(options.body),\n        headers: objectAssign({}, options.headers, {\n          'Content-Type': 'application/json'\n        })\n      });\n    }\n  };\n};","map":{"version":3,"mappings":";;;;;;;;AAAA,IAAMA,eAAeC,QAAQ,eAARA,CAArB;;AACA,IAAMC,gBAAgBD,QAAQ,iBAARA,CAAtB;;AAEA,IAAME,iBAAiB,CAAC,SAAD,EAAY,QAAZ,EAAsB,QAAtB,CAAvB;;AACA,IAAMC,WAAW,SAAXA,QAAW;EAAA,OACf,CAAC,CAACC,IAAIC,WAAN,IACA,OAAOD,IAAIC,WAAJD,CAAgBD,QAAvB,KAAoC,UADpC,IAEAC,IAAIC,WAAJD,CAAgBD,QAAhBC,CAAyBA,GAAzBA,CAHe;AAAjB;;AAKAE,OAAOC,OAAPD,GAAiB;EAAA,OAAO;IACtBE,gBAAgB,iCAAW;MACzB,IAAMC,OAAOC,QAAQD,IAArB;;MACA,IAAI,CAACA,IAAL,EAAW;QACT,OAAOC,OAAP;MACD;;MAED,IAAMC,WAAW,OAAOF,KAAKG,IAAZ,KAAqB,UAAtC;MACA,IAAMC,kBACJ,CAACF,QAAD,IACA,CAACR,SAASM,IAATN,CADD,KAECD,eAAeY,OAAfZ,QAA8BO,IAA9B,yCAA8BA,IAA9B,OAAwC,CAAC,CAAzCP,IAA8Ca,MAAMC,OAAND,CAAcN,IAAdM,CAA9Cb,IAAqED,cAAcQ,IAAdR,CAFtE,CADF;;MAKA,IAAI,CAACY,eAAL,EAAsB;QACpB,OAAOH,OAAP;MACD;;MAED,OAAOX,aAAa,EAAbA,EAAiBW,OAAjBX,EAA0B;QAC/BU,MAAMQ,KAAKC,SAALD,CAAeP,QAAQD,IAAvBQ,CADyB;QAE/BE,SAASpB,aAAa,EAAbA,EAAiBW,QAAQS,OAAzBpB,EAAkC;UACzC,gBAAgB;QADyB,CAAlCA;MAFsB,CAA1BA,CAAP;IAMD;EAvBqB,CAAP;AAAjB","names":["objectAssign","require","isPlainObject","serializeTypes","isBuffer","obj","constructor","module","exports","processOptions","body","options","isStream","pipe","shouldSerialize","indexOf","Array","isArray","JSON","stringify","headers"],"sources":["../../src/middleware/jsonRequest.js"],"sourcesContent":["const objectAssign = require('object-assign')\nconst isPlainObject = require('is-plain-object')\n\nconst serializeTypes = ['boolean', 'string', 'number']\nconst isBuffer = obj =>\n  !!obj.constructor &&\n  typeof obj.constructor.isBuffer === 'function' &&\n  obj.constructor.isBuffer(obj)\n\nmodule.exports = () => ({\n  processOptions: options => {\n    const body = options.body\n    if (!body) {\n      return options\n    }\n\n    const isStream = typeof body.pipe === 'function'\n    const shouldSerialize =\n      !isStream &&\n      !isBuffer(body) &&\n      (serializeTypes.indexOf(typeof body) !== -1 || Array.isArray(body) || isPlainObject(body))\n\n    if (!shouldSerialize) {\n      return options\n    }\n\n    return objectAssign({}, options, {\n      body: JSON.stringify(options.body),\n      headers: objectAssign({}, options.headers, {\n        'Content-Type': 'application/json'\n      })\n    })\n  }\n})\n"]},"metadata":{},"sourceType":"script"}